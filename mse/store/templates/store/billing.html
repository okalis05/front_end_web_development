{% extends "store/base_store.html" %}
{% block title %}Billing • Store{% endblock %}
{% block content %}
<section class="grid2">
  <div class="card glass">
    <h1 class="h1">Billing</h1>
    <div class="muted">Tenant: <b>{{ org.name }}</b></div>
    <div class="big">{{ sub.plan.name }}</div>
    <div class="muted">Status: <b>{{ sub.status }}</b> • Period: <b>{{ sub.billing_period }}</b></div>

    <form method="post" class="form">
      {% csrf_token %}
      <label>Plan</label>
      <select name="plan">
        {% for p in plans %}
          <option value="{{ p.code }}" {% if p.id == sub.plan.id %}selected{% endif %}>{{ p.name }}</option>
        {% endfor %}
      </select>

      <label>Billing Period</label>
      <select name="period">
        <option value="monthly" {% if sub.billing_period == "monthly" %}selected{% endif %}>Monthly</option>
        <option value="annual" {% if sub.billing_period == "annual" %}selected{% endif %}>Annual</option>
      </select>

      <button class="btn gold" type="submit">Apply</button>
    </form>
  </div>

  <div class="card glass">
    <h2 class="h2">Executive Enhancements</h2>
    <ul class="bullets">
      <li>Audit log for billing actions</li>
      <li>Ledger entry on payments</li>
      <li>Tenant isolation enforced by middleware</li>
      <li>API endpoints are org-scoped</li>
    </ul>
    <div class="actions">
      <a class="btn crimson" href="{% url 'store:audit' %}">Audit</a>
      <a class="btn purple" href="{% url 'store:invoices' %}">Invoices</a>
    </div>
  </div>
</section>
{% endblock %}

{% extends "mystics_site/base.html" %}
{% block title %}Home • Mystics Insight Hub{% endblock %}

{% block content %}
<section class="ms-hero ms-reveal">
  <div class="ms-hero-left">
    <h1 class="ms-h1">
      A <span class="ms-grad">WNBA {{ season }}</span> command center.
    </h1>
    <p class="ms-sub">
      Teams, rosters, game logs, and interactive stat storytelling—built to feel better than a broadcast package.
    </p>

    <div class="ms-metrics">
      <div class="ms-metric">
        <div class="ms-metric-k">{{ teams_count }}</div>
        <div class="ms-metric-l">Teams</div>
      </div>
      <div class="ms-metric">
        <div class="ms-metric-k">{{ players_count }}</div>
        <div class="ms-metric-l">Players</div>
      </div>
      <div class="ms-metric">
        <div class="ms-metric-k">{{ games_count }}</div>
        <div class="ms-metric-l">{{ season }} Games</div>
      </div>
    </div>

    <div class="ms-kpirow ms-reveal">
      {% for p in top_players %}
      <div class="ms-kpi">
        <span class="ms-k">
          {{ p.player__first_name }} {{ p.player__last_name }}
        </span>
        <span class="ms-l">{{ p.ppg|floatformat:1 }} PPG</span>
      </div>
      {% empty %}
      <div class="ms-dim">No scoring leaders yet for {{ season }}.</div>
      {% endfor %}
    </div>

    <div class="ms-cta-row">
      <a class="ms-btn" href="{% url 'mystics_site:teams' %}">Explore Teams</a>
      <a class="ms-btn ms-btn-ghost" href="{% url 'mystics_site:players' %}">Browse Players</a>
      <a class="ms-btn ms-btn-ghost" href="{% url 'mystics_site:dashboard' %}">Dashboard</a>
    </div>
  </div>

  <div class="ms-hero-right">
    <div class="ms-card ms-card-glow ms-reveal">
      <div class="ms-card-h">
        <span class="ms-pill">Top Scorers</span>
        <span class="ms-dim">{{ season }} • min 5 games</span>
      </div>

      <div class="ms-table">
        <div class="ms-row ms-head">
          <div>Player</div><div>Team</div><div class="ms-right">PPG</div>
        </div>

        {% if top_scorers %}
          {% for r in top_scorers %}
          <a class="ms-row ms-linkrow" href="{% url 'mystics_site:player_detail' r.player__api_id %}">
            <div>{{ r.player__first_name }} {{ r.player__last_name }}</div>
            <div class="ms-dim">{{ r.player__team__abbreviation|default:"—" }}</div>
            <div class="ms-right">{{ r.ppg|floatformat:1 }}</div>
          </a>
          {% endfor %}
        {% else %}
          <div class="ms-empty">
            No stats yet. Run <span class="ms-code">python manage.py mystics_sync</span> to seed data.
          </div>
        {% endif %}
      </div>
    </div>

    <div class="ms-orbit ms-reveal" aria-hidden="true">
      <div class="ms-orb ms-orb-a"></div>
      <div class="ms-orb ms-orb-b"></div>
      <div class="ms-orb ms-orb-c"></div>
    </div>
  </div>
</section>
{% endblock %}

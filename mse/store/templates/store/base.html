{% load static %}
<!doctype html>
<html lang="en" class="st-root">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="color-scheme" content="dark light" />
  <title>{% block title %}Store SaaS{% endblock %}</title>

  <link rel="stylesheet" href="{% static 'store/css/store.css' %}">
  <script>
    (function(){
      const key="store_theme";
      const saved=localStorage.getItem(key);
      const prefersDark=window.matchMedia && window.matchMedia("(prefers-color-scheme: dark)").matches;
      const theme=saved || (prefersDark ? "dark" : "light");
      document.documentElement.dataset.theme=theme;
    })();
  </script>
  <script src="{% static 'store/js/store.js' %}" defer></script>
  {% block extra_head %}{% endblock %}
</head>

<body class="st-body">
  <a class="st-skip" href="#main">Skip to content</a>

  <header class="st-topbar" role="banner">
    <div class="st-topbar__inner">
      <a class="st-brand" href="{% url 'store:landing' %}" aria-label="Store home">
        <span class="st-brand__mark" aria-hidden="true">✦</span>
        <span class="st-brand__text">Elysian Store</span>
      </a>

      <nav class="st-nav" aria-label="Primary">
        <a class="st-nav__link" href="{% url 'store:pricing' %}">Pricing</a>
        {% if user.is_authenticated %}
          <a class="st-nav__link" href="{% url 'store:dashboard' %}">Dashboard</a>
          <a class="st-nav__link" href="{% url 'store:billing' %}">Billing</a>
          <a class="st-nav__link" href="{% url 'store:settings' %}">Settings</a>
        {% else %}
          <a class="st-nav__link" href="{% url 'store:login' %}">Login</a>
          <a class="st-nav__link st-nav__cta" href="{% url 'store:signup' %}">Start</a>
        {% endif %}
      </nav>

      <div class="st-actions">
        <button class="st-iconbtn" type="button" data-theme-toggle aria-label="Toggle dark or light theme">
          <span aria-hidden="true">☾</span>
        </button>
      </div>
    </div>
  </header>

  {% if messages %}
    <div class="st-toastwrap" aria-live="polite" aria-atomic="true">
      {% for message in messages %}
        <div class="st-toast st-toast--{{ message.tags|default:'info' }}">
          {{ message }}
        </div>
      {% endfor %}
    </div>
  {% endif %}

  <main id="main" class="st-main" role="main">
    {% block body %}{% endblock %}
  </main>

  <footer class="st-footer">
    <div class="st-footer__inner">
      <p class="st-muted">© {{ now|date:"Y" }} Elysian Store — multi-tenant SaaS.</p>
    </div>
  </footer>
</body>
<a class="st-btn st-btn--gold" href="{% url 'portfolio:about' %}">Back to Portfolio &rarr;</a>
</html>
